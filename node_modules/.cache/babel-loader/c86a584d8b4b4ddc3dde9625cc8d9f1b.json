{"ast":null,"code":"import _regeneratorRuntime from \"/Users/maegallego/Desktop/IRONHACK/NewRepoTodoapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/maegallego/Desktop/IRONHACK/NewRepoTodoapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { defineStore } from 'pinia';\nimport supabase from '@/supabase/index';\nexport default defineStore('user', {\n  state: function state() {\n    return {\n      user: null\n    };\n  },\n  actions: {\n    fetchUser: function fetchUser() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var user;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return supabase.auth.user();\n\n              case 2:\n                user = _context.sent;\n                _this.user = user;\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    signUp: function signUp(email, password) {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _yield$supabase$auth$, user, error;\n\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return supabase.auth.signUp({\n                  email: email,\n                  password: password\n                });\n\n              case 2:\n                _yield$supabase$auth$ = _context2.sent;\n                user = _yield$supabase$auth$.user;\n                error = _yield$supabase$auth$.error;\n\n                if (!error) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw error;\n\n              case 7:\n                if (user) _this2.user = user;\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    signOut: function signOut() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var _yield$supabase$auth$2, error;\n\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return supabase.auth.signOut();\n\n              case 2:\n                _yield$supabase$auth$2 = _context3.sent;\n                error = _yield$supabase$auth$2.error;\n\n                if (!error) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                throw error;\n\n              case 6:\n                _this3.user = null;\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    signIn: function signIn(email, password) {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var _yield$supabase$auth$3, user, error;\n\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return supabase.auth.signIn({\n                  email: email,\n                  password: password\n                });\n\n              case 2:\n                _yield$supabase$auth$3 = _context4.sent;\n                user = _yield$supabase$auth$3.user;\n                error = _yield$supabase$auth$3.error;\n\n                if (!error) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                throw error;\n\n              case 7:\n                if (user) _this4.user = user;\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    }\n  },\n  persist: {\n    enabled: true,\n    strategies: [{\n      key: 'user',\n      storage: localStorage\n    }]\n  }\n});","map":{"version":3,"names":["defineStore","supabase","state","user","actions","fetchUser","auth","signUp","email","password","error","signOut","signIn","persist","enabled","strategies","key","storage","localStorage"],"sources":["/Users/maegallego/Desktop/IRONHACK/NewRepoTodoapp/src/store/user.js"],"sourcesContent":["import { defineStore } from 'pinia';\nimport supabase from '@/supabase/index';\n\nexport default defineStore('user', {\n  state: () => ({\n    user: null,\n  }),\n\n  actions: {\n    async fetchUser() {\n      const user = await supabase.auth.user();\n      this.user = user;\n    },\n    async signUp(email, password) {\n      const { user, error } = await supabase.auth.signUp({\n        email,\n        password,\n      });\n      if (error) throw error;\n      if (user) this.user = user;\n    },\n    async signOut() {\n      const { error } = await supabase.auth.signOut();\n      if (error) throw error;\n      this.user = null;\n    },\n    async signIn(email, password) {\n      const { user, error } = await supabase.auth.signIn({\n        email,\n        password,\n      });\n      if (error) throw error;\n      if (user) this.user = user;\n    },\n  },\n  persist: {\n    enabled: true,\n    strategies: [\n      {\n        key: 'user',\n        storage: localStorage,\n      },\n    ],\n  },\n});\n"],"mappings":";;AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,OAAOC,QAAP,MAAqB,kBAArB;AAEA,eAAeD,WAAW,CAAC,MAAD,EAAS;EACjCE,KAAK,EAAE;IAAA,OAAO;MACZC,IAAI,EAAE;IADM,CAAP;EAAA,CAD0B;EAKjCC,OAAO,EAAE;IACDC,SADC,uBACW;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACGJ,QAAQ,CAACK,IAAT,CAAcH,IAAd,EADH;;cAAA;gBACVA,IADU;gBAEhB,KAAI,CAACA,IAAL,GAAYA,IAAZ;;cAFgB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGjB,CAJM;IAKDI,MALC,kBAKMC,KALN,EAKaC,QALb,EAKuB;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACER,QAAQ,CAACK,IAAT,CAAcC,MAAd,CAAqB;kBACjDC,KAAK,EAALA,KADiD;kBAEjDC,QAAQ,EAARA;gBAFiD,CAArB,CADF;;cAAA;gBAAA;gBACpBN,IADoB,yBACpBA,IADoB;gBACdO,KADc,yBACdA,KADc;;gBAAA,KAKxBA,KALwB;kBAAA;kBAAA;gBAAA;;gBAAA,MAKXA,KALW;;cAAA;gBAM5B,IAAIP,IAAJ,EAAU,MAAI,CAACA,IAAL,GAAYA,IAAZ;;cANkB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAO7B,CAZM;IAaDQ,OAbC,qBAaS;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACUV,QAAQ,CAACK,IAAT,CAAcK,OAAd,EADV;;cAAA;gBAAA;gBACND,KADM,0BACNA,KADM;;gBAAA,KAEVA,KAFU;kBAAA;kBAAA;gBAAA;;gBAAA,MAEGA,KAFH;;cAAA;gBAGd,MAAI,CAACP,IAAL,GAAY,IAAZ;;cAHc;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAIf,CAjBM;IAkBDS,MAlBC,kBAkBMJ,KAlBN,EAkBaC,QAlBb,EAkBuB;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACER,QAAQ,CAACK,IAAT,CAAcM,MAAd,CAAqB;kBACjDJ,KAAK,EAALA,KADiD;kBAEjDC,QAAQ,EAARA;gBAFiD,CAArB,CADF;;cAAA;gBAAA;gBACpBN,IADoB,0BACpBA,IADoB;gBACdO,KADc,0BACdA,KADc;;gBAAA,KAKxBA,KALwB;kBAAA;kBAAA;gBAAA;;gBAAA,MAKXA,KALW;;cAAA;gBAM5B,IAAIP,IAAJ,EAAU,MAAI,CAACA,IAAL,GAAYA,IAAZ;;cANkB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAO7B;EAzBM,CALwB;EAgCjCU,OAAO,EAAE;IACPC,OAAO,EAAE,IADF;IAEPC,UAAU,EAAE,CACV;MACEC,GAAG,EAAE,MADP;MAEEC,OAAO,EAAEC;IAFX,CADU;EAFL;AAhCwB,CAAT,CAA1B"},"metadata":{},"sourceType":"module"}